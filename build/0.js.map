{"version":3,"sources":["../../src/pages/selectcity/selectcity.module.ts","../../src/components/index-list/index-section.ts","../../src/components/index-list/index-cell.ts","../../src/pages/selectcity/selectcity.ts","../../src/components/components.module.ts","../../src/components/index-list/index-list.ts"],"names":[],"mappings":"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","file":"0.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SelectcityPage } from './selectcity';\nimport { ComponentsModule } from \"../../components/components.module\";\n\n@NgModule({\n  declarations: [\n    SelectcityPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SelectcityPage), ComponentsModule\n  ],\n})\nexport class SelectcityPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectcity/selectcity.module.ts","import { AfterViewChecked, Component, ContentChildren, ElementRef, Input, QueryList } from '@angular/core';\r\nimport { IndexCellComponent } from './index-cell';\r\n\r\n@Component({\r\n    selector: 'ion-index-section',\r\n    template: `\r\n        <div class=\"index-section\" [class.index-section-current]=\"_current\">\r\n              <!-- group-->\r\n              <div class=\"index-section-index\" >\r\n                {{index}}\r\n              </div>\r\n              <!--分组下的详细内容-->\r\n              <div class=\"index-section-main\">\r\n                <ng-content>\r\n                </ng-content>\r\n              </div>\r\n          </div>\r\n      `,\r\n    styles: [`\r\n      .index-section-index{\r\n        margin: 0;\r\n        padding: 2px 10px 2px 10px;\r\n        background-color: #fafafa;\r\n        border-bottom: 1px solid #dedede;\r\n      }\r\n      .index-section-main{\r\n        /*border-bottom: 1px solid #dedede;*/\r\n      }\r\n      .index-section-current .index-section-index{\r\n          position: sticky;\r\n          position: -webkit-sticky;\r\n          top: 0px;\r\n          left: 0px;\r\n          width: 100%;\r\n          z-index: 3;\r\n          transform: translateZ(0px);\r\n      }\r\n    `]\r\n})\r\nexport class IndexSectionComponent implements AfterViewChecked {\r\n\r\n    _current = false;\r\n\r\n    @Input() index: string;\r\n\r\n    @ContentChildren(IndexCellComponent) _listOfIndexCell: QueryList<IndexCellComponent>;\r\n\r\n    constructor(public elementRef: ElementRef) { }\r\n\r\n    getElementRef(): ElementRef {\r\n        return this.elementRef;\r\n    }\r\n\r\n    ngAfterViewChecked(): void {\r\n        // setTimeout(()=>{\r\n        //   if (this._listOfIndexCell && this._listOfIndexCell.length) {\r\n        //     const listArray = this._listOfIndexCell.toArray();\r\n        //     listArray[listArray.length - 1]._lastItem = true;\r\n        //   }\r\n        // })\r\n    }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/index-list/index-section.ts","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n    selector: 'ion-index-cell',\r\n    template: `\r\n      <div class=\"index-cell\">\r\n        <div class=\"index-cell-item\">\r\n          <ng-content></ng-content>\r\n        </div>\r\n      </div>\r\n    `,\r\n    styles: [`\r\n      .index-cell{\r\n        background-color: #fff;\r\n        padding-left:10px\r\n      }\r\n      .index-cell-item{\r\n        box-sizing: border-box;\r\n        color: inherit;\r\n        min-height: 48px;\r\n        display: block;\r\n        overflow: hidden;\r\n        position: relative;\r\n        text-decoration: none;\r\n        border-bottom: 1px solid #dcd8d8;\r\n        width: 100%;\r\n        display: flex;\r\n        align-items: center;\r\n      }\r\n    `]\r\n})\r\nexport class IndexCellComponent implements OnInit {\r\n\r\n    constructor() { }\r\n\r\n    ngOnInit() { }\r\n\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/components/index-list/index-cell.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\n\n/**\n * Generated class for the SelectcityPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-selectcity',\n  templateUrl: 'selectcity.html',\n})\nexport class SelectcityPage {\n  callback;\n  constructor(public navCtrl: NavController, public navParams: NavParams) {\n    this.callback = this.navParams.get(\"callback\")\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad SelectcityPage');\n  }\n\n  selectCity(param) {\n    console.log('selectCyty', param);\n    this.callback(param).then(() => {\n      this.navCtrl.pop();\n    });\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/selectcity/selectcity.ts","import { IonicModule } from 'ionic-angular';\nimport { NgModule } from '@angular/core';\nimport { IndexListComponent } from './index-list/index-list';\nimport { IndexCellComponent } from \"./index-list/index-cell\";\nimport { IndexSectionComponent } from \"./index-list/index-section\";\n@NgModule({\n\tdeclarations: [\n\t\tIndexListComponent,\n\t\tIndexCellComponent,\n\t\tIndexSectionComponent],\n\timports: [IonicModule],\n\texports: [\n\t\tIndexListComponent,\n\t\tIndexCellComponent,\n\t\tIndexSectionComponent]\n})\nexport class ComponentsModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/components.module.ts","import { AfterViewChecked, Component, ContentChild, ElementRef, Input, QueryList, ViewChild, ContentChildren } from '@angular/core';\nimport { IndexSectionComponent } from './index-section';\n\n/**\n * Generated class for the IndexListComponent component.\n *\n * See https://angular.io/api/core/Component for more info on Angular\n * Components.\n */\n@Component({\n  selector: 'ion-index-list',\n  template: `\n    <div class=\"index-list\">\n      <div class=\"index-list-wrapper\"  #scrollContent tappable (scroll)=\"onScroll($event)\">\n        <ng-content select=\"[top]\"></ng-content>\n        <ng-content></ng-content>\n      </div>\n      <div class=\"index-list-nav\" (touchstart)=\"touchstart($event)\" (touchmove)=\"touchmove($event)\" (touchend)=\"touchend($event)\">\n        <div class=\"index-bar\" *ngFor=\"let index of _indexes;\"\n             [class.index-list-nav-activate]=\"index === _currentIndicator\">\n          {{index}}\n        </div>\n      </div>\n      \n      <div class=\"modal\" [class.show]=\"_showModal\">\n        {{_currentIndicator}}\n      </div>\n    </div>\n  `,\n  styles: [`\n    ::-webkit-scrollbar {\n      width: 0\n    }\n    .index-list{\n      width: 100%;\n      display: flex;\n      justify-content: space-between;\n      height: 100%;\n      overflow: hidden;\n      transform:translate(0,0);\n    }\n    .index-list-wrapper{\n      width: 100%;\n      overflow-y: scroll;\n      -webkit-overflow-scrolling: touch;\n    }\n    .index-list-nav{\n      width:6%;\n      position: absolute;\n      top: 44px;\n      right: 0;\n      display: flex;\n      justify-content:center;\n      flex-direction: column;\n      text-align: center;\n      background-color: rgba(245, 245, 245, 0.3);\n      height: 100%;\n      z-index: 1000;\n      -webkit-touch-callout: none;\n    }\n    .index-bar{\n      padding: 2px 6px;\n      font-size: 10px;\n    }\n    .index-list-nav-activate{\n      color: red;\n    }\n    .modal {\n      top: 50%;\n      left: 50%;\n      z-index: 100;\n      position: fixed;\n      pointer-events: none;\n      width: 20vw;\n      height: 20vw;\n      line-height: 20vw;\n      margin-left: -10vw;\n      margin-top: -10vw;\n      color: #fff;\n      font-size: 5em;\n      text-align: center;\n      border-radius: 8px;\n      background-color: rgba(0, 0, 0, 0.52);\n      -webkit-box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.16);\n      box-shadow: 0 0 4px 1px rgba(0, 0, 0, 0.16);\n      -webkit-transition: opacity .5s;\n      -o-transition: opacity .5s;\n      transition: opacity .5s;\n      opacity: 0;\n    }\n    .modal.show {\n      opacity: 1;\n    }\n  `]\n})\nexport class IndexListComponent implements AfterViewChecked {\n\n  _currentIndicator;\n\n  _flag = true;\n  _indexes: any[] = []; //右侧导航\n  _offsetTops: Array<number> = []; // 每个IndexSection 的offsetTop\n  _navOffsetX: 0;\n  _indicatorTime: any = null;\n  _showModal = false;\n\n\n  @Input() hasTop: boolean = false;\n\n  @ViewChild('top') top: ElementRef;\n  @ContentChildren(IndexSectionComponent) _listOfIndexSection: QueryList<IndexSectionComponent>;\n  @ViewChild('scrollContent') scrollContent: ElementRef;\n\n  constructor() {\n\n  }\n\n  ngAfterViewChecked(): void {\n    if (this._flag && this._listOfIndexSection) {\n      this._listOfIndexSection.forEach((section) => {\n        this._indexes.push(section.index);\n        const offsetTop = section.getElementRef().nativeElement.offsetTop;\n        this._offsetTops.push(offsetTop);\n\n      });\n      this._flag = false;\n\n      if (this.hasTop) {\n        this._indexes.unshift('#');\n        this._offsetTops.unshift(0);\n\n      }\n    }\n  }\n\n  onScroll(e: any) {\n    e.preventDefault();\n    const scrollTopOffsetTop = this.scrollContent.nativeElement.scrollTop;\n\n    this._offsetTops.forEach((v, i) => {\n      if (scrollTopOffsetTop >= v) {\n        this._currentIndicator = this._indexes[i];\n\n        //\n        this.setCurrentSection(this._currentIndicator);\n      }\n\n    });\n  }\n\n  touchstart(e: any) {\n    this._navOffsetX = e.changedTouches[0].clientX;\n    this.scrollList(e.changedTouches[0].clientY);\n  }\n\n  touchmove(e: any) {\n    e.preventDefault();\n    this.scrollList(e.changedTouches[0].clientY);\n  }\n\n  touchend(e: any) {\n    this._indicatorTime = setTimeout(() => {\n      this._showModal = false;\n      this._currentIndicator = '';\n    }, 500);\n  }\n\n  scrollList(y: any) {\n\n    const currentItem: any = document.elementFromPoint(this._navOffsetX, y);\n    if (!currentItem || !currentItem.classList.contains('index-bar')) {\n      return;\n    }\n    this._currentIndicator = currentItem['innerText'];\n    const index = this._indexes.indexOf(this._currentIndicator);\n\n    this.scrollContent.nativeElement.scrollTop = this._offsetTops[index];\n\n\n    this._showModal = true;\n    if (this._indicatorTime) {\n      clearTimeout(this._indicatorTime);\n    }\n  }\n\n  setCurrentSection(currentindex: string) {\n    const listArray = this._listOfIndexSection.toArray();\n    listArray.forEach((section) => {\n      if (section.index === currentindex) {\n        section._current = true;\n      } else {\n        section._current = false;\n      }\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/index-list/index-list.ts"],"sourceRoot":""}